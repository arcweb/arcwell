<mat-accordion [multi]="false" class="feature-menu-container">
  @for (feature of featureStore.features(); track feature.name) {
    <mat-expansion-panel
      hideToggle
      [expanded]="featureStore.activeFeature()?.path === feature.path"
      [disabled]="featureStore.activeFeature()?.path === feature.path"
    >
      <mat-expansion-panel-header
        [routerLink]="feature.path"
        routerLinkActive="feature-active"
      >
        <mat-panel-title [attr.aria-label]="feature.name" class="feature-title">
          <mat-icon>{{ feature.icon }}</mat-icon>
          {{ feature.name }}
        </mat-panel-title>
      </mat-expansion-panel-header>
      @for (subfeature of feature.subfeatures; track subfeature.name) {
        <a
          mat-list-item
          [routerLink]="subfeature.path"
          routerLinkActive="feature-button-active"
        >
          <mat-icon>{{ subfeature.icon }}</mat-icon>
          {{ subfeature.name }}
        </a>
      }
    </mat-expansion-panel>
  }
</mat-accordion>
