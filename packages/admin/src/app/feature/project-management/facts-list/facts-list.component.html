<div class="main-container-header">
  <h2>{{ featureStore.activeSubfeature()?.name || 'Facts' }}</h2>
  <div class="icons-container">
    <button
      mat-icon-button
      [routerLink]="['/project-management/facts/create']"
      [queryParams]="{ typeKey: typeKey$ | async }"
    >
      <mat-icon aria-label="Create fact icon button">
        add_circle_outline
      </mat-icon>
    </button>
    <button mat-icon-button>
      <mat-icon aria-label="Filter icon button">account_tree</mat-icon>
    </button>
    <button mat-icon-button>
      <mat-icon aria-label="Search icon button">search</mat-icon>
    </button>
  </div>
</div>

@if (factsListStore.isErrored()) {
  <aw-error-container [errors]="factsListStore.errors()" />
}

<aw-facts-table
  [dataSource]="dataSource"
  [displayedColumns]="displayedColumns"
  [matSortActive]="this.factsListStore.sort()"
  [matSortDirection]="this.factsListStore.order()"
  [length]="this.factsListStore.totalData()"
  [pageSizes]="pageSizes"
  [pageSize]="this.factsListStore.limit()"
  [pageIndex]="this.factsListStore.pageIndex()"
  (onPageChanged)="this.factsListStore.loadPage($event)"
  (onRowClicked)="rowClick($event)"
  (onSortChanged)="sortChange($event)"
  (onViewEventClicked)="viewEvent($event)"
  (onViewResourceClicked)="viewResource($event)"
  (onViewPersonClicked)="viewPerson($event)"
></aw-facts-table>
