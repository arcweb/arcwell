<div class="resources-management-container">
  <div class="main-container-header">
    <h2>{{ featureStore.activeSubfeature()?.name || 'Resources' }}</h2>
    <div class="icons-container">
      <button
        mat-icon-button
        [routerLink]="['/project-management/resources/create']"
        [queryParams]="{ typeKey: typeKey$ | async }"
      >
        <mat-icon aria-label="Create resource icon button">
          add_circle_outline
        </mat-icon>
      </button>
      <button mat-icon-button>
        <mat-icon aria-label="Filter icon button">account_tree</mat-icon>
      </button>
      <button mat-icon-button>
        <mat-icon aria-label="Search icon button">search</mat-icon>
      </button>
    </div>
  </div>

  @if (resourcesListStore.isErrored()) {
    <aw-error-container [errors]="resourcesListStore.errors()" />
  }

  <aw-resources-table
    [dataSource]="dataSource"
    [displayedColumns]="displayedColumns"
    [matSortActive]="this.resourcesListStore.sort()"
    [matSortDirection]="this.resourcesListStore.order()"
    [length]="this.resourcesListStore.totalData()"
    [pageSizes]="pageSizes"
    [pageSize]="this.resourcesListStore.limit()"
    [pageIndex]="this.resourcesListStore.pageIndex()"
    (onPageChanged)="this.resourcesListStore.loadPage($event)"
    (onRowClicked)="rowClick($event)"
    (onSortChanged)="sortChange($event)"
  ></aw-resources-table>
</div>
