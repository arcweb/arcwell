<div class="main-container-header">
  <h2>
    {{ featureStore.activeSubfeature()?.name || 'People' }}
  </h2>
  <div class="icons-container">
    <button
      mat-icon-button
      [routerLink]="['/project-management/people/create']"
      [queryParams]="{ typeKey: typeKey$ | async }"
    >
      <mat-icon aria-label="Create person icon button">
        add_circle_outline
      </mat-icon>
    </button>
    <button mat-icon-button>
      <mat-icon aria-label="Filter icon button">account_tree</mat-icon>
    </button>
    <button mat-icon-button>
      <mat-icon aria-label="Search icon button">search</mat-icon>
    </button>
  </div>
</div>

@if (peopleListStore.isErrored()) {
  <aw-error-container [errors]="peopleListStore.errors()" />
}
@if (peopleListStore.people().length > 0) {
  <aw-people-table
    [dataSource]="dataSource"
    [displayedColumns]="displayedColumns"
    [matSortActive]="this.peopleListStore.sort()"
    [matSortDirection]="this.peopleListStore.order()"
    [length]="this.peopleListStore.totalData()"
    [pageSizes]="pageSizes"
    [pageSize]="this.peopleListStore.limit()"
    [pageIndex]="this.peopleListStore.pageIndex()"
    (onPageChanged)="this.peopleListStore.loadPage($event)"
    (onRowClicked)="rowClick($event)"
    (onSortChanged)="sortChange($event)"
    (onViewAccountClicked)="viewAccount($event)"
  ></aw-people-table>
}
