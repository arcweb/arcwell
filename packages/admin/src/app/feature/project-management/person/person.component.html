@if (personStore.isReady()) {
  <form [formGroup]="personForm">
    <div class="edit-button-container">
      <button
        mat-flat-button
        type="button"
        (click)="personStore.toggleEditMode()"
        class="default-button"
        [disabled]="personStore.inEditMode()"
      >
        Edit
      </button>
    </div>

    @if (personStore.isErrored()) {
      <div>
        @for (error of personStore.errors(); track error.title) {
          <h3 class="error-text">Error: {{ error.title }}</h3>
        }
      </div>
    }
    <mat-form-field class="example-full-width">
      <mat-label>Family Name</mat-label>
      <input matInput placeholder="Name" formControlName="familyName" />
      @if (personForm.controls.familyName.hasError('required')) {
        <mat-error>
          Family Name is
          <strong>required</strong>
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field class="example-full-width">
      <mat-label>Given Name</mat-label>
      <input matInput placeholder="Name" formControlName="givenName" />
      @if (personForm.controls.givenName.hasError('required')) {
        <mat-error>
          Given Name is
          <strong>required</strong>
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field class="example-full-width">
      <mat-label>Person Type Id</mat-label>
      <input
        matInput
        placeholder="Person Type Id"
        formControlName="personTypeId"
      />
      @if (personForm.controls.personTypeId.hasError('required')) {
        <mat-error>
          Person Type Id is
          <strong>required</strong>
        </mat-error>
      }
    </mat-form-field>

    <div class="form-button-container">
      <button
        mat-button
        type="button"
        (click)="personStore.toggleEditMode()"
        class="default-button"
        [disabled]="!personStore.inEditMode()"
      >
        Cancel
      </button>
      <button
        mat-flat-button
        type="submit"
        class="default-button"
        [disabled]="
          !personStore.inEditMode() || !personForm.valid || !personForm.dirty
        "
      >
        Save
      </button>
    </div>
  </form>
}
