<div class="events-management-container">
  <div class="main-container-header">
    <h2>{{ featureStore.activeSubfeature()?.name || 'Events' }}</h2>
    <div class="icons-container">
      <button
        mat-icon-button
        [routerLink]="['/project-management/events/create']"
        [queryParams]="{ typeKey: typeKey$ | async }"
      >
        <mat-icon aria-label="Create event icon button">
          add_circle_outline
        </mat-icon>
      </button>
      <button mat-icon-button>
        <mat-icon aria-label="Filter icon button">account_tree</mat-icon>
      </button>
      <button mat-icon-button>
        <mat-icon aria-label="Search icon button">search</mat-icon>
      </button>
    </div>
  </div>

  @if (eventsListStore.isErrored()) {
    <aw-error-container [errors]="eventsListStore.errors()" />
  }

  <aw-events-table
    [dataSource]="dataSource"
    [displayedColumns]="displayedColumns"
    [matSortActive]="this.eventsListStore.sort()"
    [matSortDirection]="this.eventsListStore.order()"
    [length]="this.eventsListStore.totalData()"
    [pageSizes]="pageSizes"
    [pageSize]="this.eventsListStore.limit()"
    [pageIndex]="this.eventsListStore.pageIndex()"
    (onPageChanged)="this.eventsListStore.loadPage($event)"
    (onRowClicked)="rowClick($event)"
    (onSortChanged)="sortChange($event)"
    (onViewResourceClicked)="viewResource($event)"
    (onViewPersonClicked)="viewPerson($event)"
  ></aw-events-table>
</div>
